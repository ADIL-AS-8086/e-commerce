<%- include('../partials/adminHeader')%>

<div class="container mt-5" style="margin-left: 240px; max-width: 1000px;">
  <div class="card bg-white shadow">
    <div class="card-header">
      <div class="d-flex justify-content-between align-items-center" style="font-weight: bolder;">
        Product List
        <a href="/admin/addproduct">
          <button class="btn btn-light" style="border: 1px #000;" data-bs-toggle="modal" data-bs-target="#addProductModal">
            <i class="fas fa-plus"></i> Add Product
          </button>
        </a>
      </div>
    </div>
    <div class="card-body">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">NO</th>
            <th scope="col">Product</th>
            <th scope="col">Category</th>
            <th scope="col">Stock</th>
            <th scope="col">Price</th>
            <th scope="col">Brand</th>
            <th scope="col">Edit</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
  <!-- Inside the loop for displaying products -->
<% for (let i = 0; i < productData.length; i++) { %>
  <tr>
    <th scope="row"><%= i + 1 %></th>
    <td>
      <!-- Display product image and name -->
      <% if (productData[i].images && productData[i].images.length > 0 && productData[i].images[0]) { %>
        <img src="/productimages/<%= productData[i].images[0].filename %>" alt="Product Image" style="max-width: 50px; max-height: 60px; margin-right: 10px;">
      <% } %>
      <%= productData[i].name %>
    </td>
    <td><%= productData[i].categoryId?.categoryname %></td> 
    <td><%= productData[i].stock %></td>
    <td>$<%= productData[i].price %></td>
    <td><%= productData[i].brand %></td>
    <td>
   <a href="/admin/editproduct">
      <button class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#editProductModal">
        <i class="fas fa-edit" style="color: #000;"></i>
      </button></a>

    </td>
    <td>
      <button class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#deleteProductModal">
        <i class="fas fa-trash" style="color: #000;"></i>
      </button>
    </td>
  </tr>
<% } %>

        </tbody>
      </table>
    </div>
  </div>
</div>

<%- include('../partials/adminFooter')%>
